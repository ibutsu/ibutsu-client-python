"""
Ibutsu API

A system to store and query test results

The version of the OpenAPI document: 2.8.3
Generated by OpenAPI Generator (https://openapi-generator.tech)

Do not edit the class manually.
"""

import json
from uuid import uuid4

from ibutsu_client.models.user import User


class TestUser:
    """User model tests"""

    def test_user_creation_required(self):
        """Test User creation with required parameters"""
        user = User(email="test@example.com")
        assert user.email == "test@example.com"

    def test_user_creation_full(self):
        """Test User creation with all parameters"""
        uid = uuid4()
        group_id = uuid4()

        user = User(
            id=uid,
            email="full@example.com",
            name="Full User",
            is_superadmin=True,
            is_active=True,
            group_id=group_id,
        )

        assert user.id == uid
        assert user.email == "full@example.com"
        assert user.name == "Full User"
        assert user.is_superadmin is True
        assert user.group_id == group_id

    def test_user_to_dict(self):
        """Test User to_dict conversion"""
        user = User(email="dict@example.com")
        user_dict = user.to_dict()

        assert isinstance(user_dict, dict)
        assert user_dict["email"] == "dict@example.com"

    def test_user_to_json(self):
        """Test User to_json conversion"""
        user = User(email="json@example.com")
        user_json = user.to_json()

        assert isinstance(user_json, str)
        parsed = json.loads(user_json)
        assert parsed["email"] == "json@example.com"

    def test_user_from_dict(self):
        """Test User from_dict creation"""
        user_dict = {"email": "from_dict@example.com", "name": "From Dict"}
        user = User.from_dict(user_dict)

        assert isinstance(user, User)
        assert user.email == "from_dict@example.com"
        assert user.name == "From Dict"

    def test_user_from_json(self):
        """Test User from_json creation"""
        user_json = '{"email": "from_json@example.com"}'
        user = User.from_json(user_json)

        assert isinstance(user, User)
        assert user.email == "from_json@example.com"

    def test_user_to_str(self):
        """Test User to_str representation"""
        user = User(email="str@example.com")
        user_str = user.to_str()

        assert isinstance(user_str, str)
        assert "str@example.com" in user_str

    def test_user_none_values_excluded(self):
        """Test that None values are excluded from dict"""
        user = User(email="none@example.com")
        user_dict = user.to_dict()

        assert "email" in user_dict
        assert "name" not in user_dict

    def test_user_explicit_nones(self):
        """Test explicit None values are preserved in to_dict if set"""
        user = User(email="explicit@example.com", name=None, group_id=None)
        user_dict = user.to_dict()

        assert "name" in user_dict
        assert user_dict["name"] is None
        assert "group_id" in user_dict
        assert user_dict["group_id"] is None

    def test_user_from_dict_none(self):
        """Test User.from_dict with None returns None"""
        user = User.from_dict(None)
        assert user is None

    def test_user_from_dict_non_dict(self):
        """Test from_dict with a non-dict object"""
        user_obj = User(email="obj@example.com")
        new_user = User.from_dict(user_obj)
        assert new_user.email == "obj@example.com"

    def test_user_roundtrip_json(self):
        """Test User can be serialized and deserialized"""
        uid = uuid4()
        original = User(id=uid, email="roundtrip@example.com")
        json_str = original.to_json()
        restored = User.from_json(json_str)

        assert restored.email == original.email
        assert restored.id == original.id
