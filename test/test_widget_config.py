"""
Ibutsu API

A system to store and query test results

The version of the OpenAPI document: 2.8.3
Generated by OpenAPI Generator (https://openapi-generator.tech)

Do not edit the class manually.
"""

import json
from uuid import uuid4

from ibutsu_client.models.widget_config import WidgetConfig


class TestWidgetConfig:
    """WidgetConfig model tests"""

    def test_widget_config_creation_empty(self):
        """Test WidgetConfig creation with no parameters"""
        widget_config = WidgetConfig()
        assert widget_config.id is None

    def test_widget_config_creation_full(self):
        """Test WidgetConfig creation with all parameters"""
        wid = uuid4()
        project_id = uuid4()

        widget_config = WidgetConfig(
            id=wid,
            type="widget",
            widget="my-widget",
            project_id=project_id,
            weight=10,
            params={"p1": "v1"},
            title="My Widget",
        )

        assert widget_config.id == wid
        assert widget_config.type == "widget"
        assert widget_config.weight == 10
        assert widget_config.params == {"p1": "v1"}

    def test_widget_config_to_dict(self):
        """Test WidgetConfig to_dict conversion"""
        widget_config = WidgetConfig(title="Dict Widget")
        config_dict = widget_config.to_dict()

        assert isinstance(config_dict, dict)
        assert config_dict["title"] == "Dict Widget"

    def test_widget_config_to_json(self):
        """Test WidgetConfig to_json conversion"""
        widget_config = WidgetConfig(title="JSON Widget")
        config_json = widget_config.to_json()

        assert isinstance(config_json, str)
        parsed = json.loads(config_json)
        assert parsed["title"] == "JSON Widget"

    def test_widget_config_from_dict(self):
        """Test WidgetConfig from_dict creation"""
        config_dict = {"title": "From Dict", "type": "view"}
        widget_config = WidgetConfig.from_dict(config_dict)

        assert isinstance(widget_config, WidgetConfig)
        assert widget_config.title == "From Dict"
        assert widget_config.type == "view"

    def test_widget_config_from_json(self):
        """Test WidgetConfig from_json creation"""
        config_json = '{"title": "From JSON"}'
        widget_config = WidgetConfig.from_json(config_json)

        assert isinstance(widget_config, WidgetConfig)
        assert widget_config.title == "From JSON"

    def test_widget_config_to_str(self):
        """Test WidgetConfig to_str representation"""
        widget_config = WidgetConfig(title="Str Widget")
        config_str = widget_config.to_str()

        assert isinstance(config_str, str)
        assert "Str Widget" in config_str

    def test_widget_config_none_values_excluded(self):
        """Test that None values are excluded from dict"""
        widget_config = WidgetConfig(title="None Widget")
        config_dict = widget_config.to_dict()

        assert "title" in config_dict
        assert "weight" not in config_dict

    def test_widget_config_from_dict_none(self):
        """Test WidgetConfig.from_dict with None returns None"""
        widget_config = WidgetConfig.from_dict(None)
        assert widget_config is None

    def test_widget_config_from_dict_non_dict(self):
        """Test from_dict with a non-dict object"""
        config_obj = WidgetConfig(title="test_obj")
        new_config = WidgetConfig.from_dict(config_obj)
        assert new_config.title == "test_obj"

    def test_widget_config_roundtrip_json(self):
        """Test WidgetConfig can be serialized and deserialized"""
        wid = uuid4()
        original = WidgetConfig(id=wid, title="Roundtrip")
        json_str = original.to_json()
        restored = WidgetConfig.from_json(json_str)

        assert restored.title == original.title
        assert restored.id == original.id
